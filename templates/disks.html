{% extends "base.html" %}
{% block content %}
  <h5 class="mb-2">Диски</h5>
  <div class="table-responsive mb-3">
    <table class="table table-dark table-hover table-sm align-middle">
      <thead><tr><th>Устройство</th><th>Точка монтирования</th><th>ФС</th><th>Всего</th><th>Занято</th><th>%</th></tr></thead>
      <tbody>
        {% for p in parts %}
        <tr>
          <td class="monospace">{{ p.device }}</td>
          <td class="monospace">{{ p.mount }}</td>
          <td>{{ p.fstype }}</td>
          <td>{{ p.total|bytes_human }}</td>
          <td>{{ p.used|bytes_human }}</td>
          <td>{{ p.percent }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="card">
    <div class="card-body">
      <h6 class="card-title">Анализ каталога (уровень 1)</h6>
      <form class="row g-2 mb-2" method="get">
        <div class="col-12 col-md-8">
          <input type="text" class="form-control" name="path" placeholder="C:\path\to\dir или относительный к BASE_DIR" value="{{ du_path or '' }}">
        </div>
        <div class="col-12 col-md-4">
          <button class="btn btn-primary">Показать</button>
        </div>
      </form>
      {% if du_items is not none %}
      <div class="table-responsive">
        <table class="table table-dark table-hover table-sm align-middle">
          <thead><tr><th>Имя</th><th>Тип</th><th>Размер</th></tr></thead>
          <tbody>
            {% for i in du_items %}
            <tr>
              <td class="monospace">{{ i.name }}</td>
              <td>{{ 'Каталог' if i.is_dir else 'Файл' }}</td>
              <td>{{ i.size|bytes_human }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
